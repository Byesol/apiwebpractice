### Software Architecture Document: RESTful API 설계 문서

---

#### 1. **Introduction**

**문서 목적**  
본 문서는 API 기반의 RESTful 서버 아키텍처 설계를 기록하며, 시스템 구현 및 테스트를 위한 지침을 제공합니다.

**시스템 범위**  
이 시스템은 미디어 관리, 사용자 인증, 댓글 및 재생목록 기능을 제공하는 RESTful API를 설계하여 클라이언트와 서버 간 데이터 통신을 처리합니다. 주요 기능은 사용자 인증(JWT 기반), 미디어 및 댓글 관리, 그리고 재생목록 기능입니다.

---

#### 2. **Architectural Drivers**

**Functional Requirements**  
- 사용자 인증: 회원가입, 로그인, 로그아웃, 인증 상태 확인.  
- 미디어 관리: 업로드, 태그 기반 검색, 미디어 상세 조회, 정지점 관리.  
- 댓글 관리: 댓글 및 답글 작성, 조회, 삭제.  
- 재생목록: 생성, 항목 추가, 조회, 삭제.  
- 기타: 시스템 리소스 사용량 조회 및 태그 추천.

**Non-Functional Requirements** (Optional)  
- **성능**: 페이지네이션 및 쿼리 최적화를 통한 고성능 API 제공.  
- **보안**: JWT 및 HttpOnly Cookie를 통한 인증 및 데이터 보호.  
- **확장성**: 다수의 클라이언트를 지원 가능한 구조.  
- **유지보수성**: Spring Boot 기반 모듈화 설계로 코드 가독성 및 유지보수 용이.

---

#### 3. **Architecture Overview**

**Frontend Architecture**  
- **Roles & Responsibilities**: 클라이언트는 React 기반으로 API 호출 및 데이터 표시.  

**Backend Architecture**  
- **Roles & Responsibilities**:  
  - `Controller`: 클라이언트 요청 수신 및 응답 처리.  
  - `Service`: 비즈니스 로직 처리.  
  - `Repository`: 데이터베이스와의 상호작용 처리.  
  - `Security`: Spring Security 및 JWT 토큰 인증 처리.  

---

**System Context Diagram**
```
Client <-> REST API Server <-> Database
```

**Static Perspective**  
- **Modules**:  
  - `User Module`: 인증 및 사용자 정보 관리.  
  - `Media Module`: 미디어 데이터 관리.  
  - `Comment Module`: 댓글 작성 및 조회 관리.  
  - `Playlist Module`: 재생목록 관리.  
- **Roles & Responsibilities**:  
  각 모듈은 독립적으로 API를 제공하며, Spring의 DI를 통해 의존성을 관리.

**Dynamic Perspective**  
- 예: 댓글 작성 시 동작 흐름  
  1. 클라이언트가 댓글 작성 API 호출 → Controller가 요청 데이터 수신  
  2. Service에서 데이터 유효성 검사 및 처리  
  3. Repository에서 데이터 저장 → 성공 시 응답 반환.

---

#### 4. **Data Design**

**Database Schema**  
- `Users`: 사용자 정보 (ID, 이메일, 비밀번호, 권한 등).  
- `Media`: 미디어 정보 (ID, 제목, URL, 태그 등).  
- `Comments`: 댓글 및 답글 (ID, 작성자, 내용, 상위 댓글 ID 등).  
- `Playlists`: 재생목록 (ID, 제목, 설명, 항목 등).  
- `Playback`: 재생 기록 (미디어 ID, 재생 시간 등).  

**ER Diagram**
(간략화된 예시)  

```
Users --> Media --> Comments
       --> Playlists --> PlaylistItems
```

---

#### 5. **Architecture/Design Decisions**

- **JWT 사용 이유**: 사용자 인증의 안전성과 확장성.  
- **Spring Boot 선택 이유**: 빠른 개발 및 유지보수 용이성.  
- **데이터베이스 설계**: 관계형 데이터베이스(MySQL)를 사용하여 데이터 무결성 보장.  

**트레이드오프**  
- JWT 사용으로 보안 강화, 하지만 토큰 만료 시 재인증 과정 필요.  
- RDB 사용으로 데이터 관계 관리 용이, 하지만 초기 스키마 설계의 복잡성 존재.

---

해당 내용을 바탕으로 Markdown 형식으로 문서를 작성할 수 있습니다. 추가적으로 필요한 사항이 있다면 알려주세요!
